<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>经营分析</title>
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link rel="stylesheet" href="${request.contextPath}/statics/lib/layui-v2.5.5/css/layui.css" media="all">
    <link rel="stylesheet" href="${request.contextPath}/statics/css/public.css" media="all">
    <style>
        @font-face{
            font-family: yjsz;
            src:url('${request.contextPath}/statics/lib/fonts/yjsz.TTF')
        }
        .title > h3{
            font-size: 20px;
            font-weight: bold;
            padding: 0 0 5px 10px;
        }
        .title > span{
            font-size: 16px;
            padding: 0 0 4px 10px;
            inline-size: 28px;
        }
        .title > div{
            padding: 0 0 6px 5px;
        }
        .dataDiv{
            height: 25%;
            width: 100%;
            text-align: center;
        }
        .dataDiv > h3{
            font-size: 15px;
            margin: 0 0 10px 0;
            color: #00a2d4;
        }
        .dataDiv > span{
            font-size: 30px;
            font-family: 'yjsz';
            color: #1aa094;
        }
        .revenueDiv{
            height: 33.3%;
            width: 100%;
            text-align: center;
        }
        .revenueDiv > h3{
            font-size: 18px;
            margin: 0 0 10px 0;
            color: #00a2d4;
        }
        .revenueDiv > span{
            font-size: 30px;
            font-family: 'yjsz';
            color: #1aa094;
        }
    </style>
</head>
<body class="layuimini-all">
    <div class="layui-layout layui-layout-admin">
        <div class="layuimini-container layuimini-page-anim" style="margin-top: -10px">
            <div class="layuimini-main" >
                <div style="margin: 10px 10px 10px 10px">
                    <form class="layui-form layui-form-pane" action="">
                        <div class="layui-form-item">
                            <div class="layui-inline">
                                <div class="layui-input-inline">
                                    <select class="layui-unselect layui-form-select" id="areaSelect">
                                        <option>北京</option>
                                        <option>上海</option>
                                        <option>广州</option>
                                        <option>武汉</option>
                                    </select>
                                </div>
                            </div>
                            <div class="layui-inline">
                                <div class="layui-input-inline">
                                    <select class="layui-unselect layui-form-select" id="hotelSelect">
                                        <option>北京-五道口店</option>
                                        <option>北京-霍营店</option>
                                        <option>北京-上地店</option>
                                        <option>北京-三里屯店</option>
                                    </select>
                                </div>
                            </div>
                            <div class="layui-inline">
                                <div class="layui-input-inline">
                                    <input type="text" name="date" id="date" lay-verify="date" placeholder="--请选择日期--" autocomplete="off" class="layui-input">
                                </div>
                            </div>
                            <div class="layui-inline" id="layerDemo" >
                                <button type="submit" class="layui-btn layui-btn-primary"  lay-submit lay-filter="data-search-btn"><i class="layui-icon"></i>查看</button>
                            </div>
                        </div>
                    </form>
                </div>
               <!-- <fieldset class="layui-elem-field layui-field-title site-title">
                    <legend>酒店画像</legend>
                </fieldset>-->
                <div class="layui-row layui-col-space15" style="height: 520px;">
                    <div class="layui-row layui-col-space15" style="height: 100%;padding-left: 40px">
                        <div class="layui-col-xs7 layui-col-md7" style="height: 100%;">
                            <div class="layui-row" style="height: 16%;">
                                <div class="layui-col-md-12 title" style="height:100%; width: 100%;">
                                    <h3>北京五道口假日大酒店</h3>
                                    <span>星级：</span>
                                    <div id="start"></div>
                                    <span>类型： 度假型酒店</span>
                                </div>
                            </div>
                            <div class="layui-row" style="height: 84%;">
                                <div class="layui-col-md-12" style="height:100%; width: 100%;">
                                    <div class="layui-col-xs2" style="height: 100%;">
                                        <div class="dataDiv">
                                            <h3>昨日入住夜数</h3>
                                            <span>187</span>
                                        </div>
                                        <div class="dataDiv">
                                            <h3>入住率</h3>
                                            <span>78.2%</span>
                                        </div>
                                        <div class="dataDiv">
                                            <h3>回头客占比</h3>
                                            <span>78.2%</span>
                                        </div>
                                        <div class="dataDiv">
                                            <h3>VIP客户占比</h3>
                                            <span>78.2%</span>
                                        </div>
                                    </div>
                                    <div class="layui-col-xs10" style="height: 100%;border-left: solid 1px #f0f0f0">
                                        <div id="hotelPortrayal" style="height: 100%;"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="layui-col-xs5 layui-col-md5" style="height: 100%;padding-left: 30px;border-left: solid 1px #f0f0f0">
                            <div class="layui-row" style="height: 16%;">
                                <div class="layui-col-md-12 title" style="height:100%; width: 100%;">
                                    <h3>&nbsp;</h3>
                                    <span>客评分析</span>
                                </div>
                            </div>
                            <div class="layui-row" style="height: 84%;">
                                <div class="layui-row" style="height: 15%;">
                                    <form class="layui-form" action="" lay-filter="example">
                                        <div class="layui-form-item">
                                            <label class="layui-form-label">评价类型</label>
                                            <div class="layui-input-inline">
                                                <select id="type" name="type" lay-filter="type">
                                                    <option value="0">综合评价</option>
                                                    <option value="1">服务评价</option>
                                                    <option value="2">价格评价</option>
                                                    <option value="3">卫生评价</option>
                                                    <option value="4">位置评价</option>
                                                    <option value="5">餐饮评价</option>
                                                    <option value="6">设施评价</option>
                                                </select>
                                            </div>
                                        </div>
                                    </form>
                                    <!--<div>
                                        <button type="button" id="bt1" class="layui-btn layui-btn-radius">综合评价</button>
                                        <button type="button" id="bt2" class="layui-btn layui-btn-radius">服务评价</button>
                                        <button type="button" id="bt3" class="layui-btn layui-btn-radius">价格评价</button>
                                        <button type="button" id="bt4" class="layui-btn layui-btn-radius">卫生评价</button>
                                    </div>
                                    <div style="margin-top: 5px;">
                                        <button type="button" class="layui-btn layui-btn-radius">位置评价</button>
                                        <button type="button" class="layui-btn layui-btn-radius">餐饮评价</button>
                                        <button type="button" class="layui-btn layui-btn-radius">设施评价</button>
                                    </div>-->
                                </div>
                                <div class="layui-row" style="height: 85%;">
                                    <div class="layui-col-md-12" style="height:100%; width: 100%;">
                                        <div class="layui-col-xs7" style="height: 100%;">
                                            <div style="height: 90%" id="appraiseRate"></div>
                                        </div>
                                        <div class="layui-col-xs5" style="height: 100%;">
                                            <div class="layui-card">
                                                <div class="layui-card-header">最近评价列表</div>
                                                <div class="layui-card-body">
                                                    <ul class="layui-timeline">
                                                        <li class="layui-timeline-item">
                                                            <i class="layui-icon layui-timeline-axis"></i>
                                                            <div class="layui-timeline-content layui-text">
                                                                <div class="layui-timeline-title">干净又卫生，下次还来</div>
                                                            </div>
                                                        </li>
                                                        <li class="layui-timeline-item">
                                                            <i class="layui-icon layui-timeline-axis"></i>
                                                            <div class="layui-timeline-content layui-text">
                                                                <div class="layui-timeline-title">服务很周到，前台小姐姐很漂亮</div>
                                                            </div>
                                                        </li>
                                                        <li class="layui-timeline-item">
                                                            <i class="layui-icon layui-timeline-axis"></i>
                                                            <div class="layui-timeline-content layui-text">
                                                                <div class="layui-timeline-title">价格小贵，不过值得来</div>
                                                            </div>
                                                        </li>
                                                        <li class="layui-timeline-item">
                                                            <i class="layui-icon layui-anim layui-anim-rotate layui-anim-loop layui-timeline-axis"></i>
                                                            <div class="layui-timeline-content layui-text">
                                                                <div class="layui-timeline-title">很久之前的评价</div>
                                                            </div>
                                                        </li>
                                                    </ul>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <hr class="layui-bg-green">
                <div class="layui-row layui-col-space15" style="height: 500px;">
                    <div class="layui-row layui-col-space15" style="height: 100%;padding-left: 40px">
                        <div class="layui-col-xs7 layui-col-md7" style="height: 100%;">
                            <div class="layui-row" style="height: 16%;">
                                <div class="layui-col-md-12 title" style="height:100%; width: 100%;">
                                    <h3>&nbsp;</h3>
                                    <span>酒店客房营收分析</span>
                                </div>
                            </div>
                            <div class="layui-row" style="height: 84%;">
                                <div class="layui-col-md-12" style="height:100%; width: 100%;">
                                    <div class="layui-col-xs2" style="height: 100%;">
                                        <div class="revenueDiv">
                                            <h3>OCC(%)</h3>
                                            <span>77.1</span>
                                        </div>
                                        <div class="revenueDiv">
                                            <h3>RevPAR</h3>
                                            <span>871.9</span>
                                        </div>
                                        <div class="revenueDiv">
                                            <h3>ADR</h3>
                                            <span>1130.3</span>
                                        </div>
                                    </div>
                                    <div class="layui-col-xs10" style="height: 100%;">
                                        <div id="revenueHomeStat" style="height: 100%;"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="layui-col-xs5 layui-col-md5" style="height: 100%;padding-left: 30px;border-left: solid 1px #f0f0f0">
                            <div class="layui-row" style="height: 16%;">
                                <div class="layui-col-md-12 title" style="height:100%; width: 100%;">
                                    <h3>&nbsp;</h3>
                                    <span>酒店对标情况</span>
                                </div>
                            </div>
                            <div class="layui-row" style="height: 84%;">
                                <div class="layui-row" style="height: 50%;border-bottom: solid 1px #f0f0f0">
                                    <div style="height: 100%" id="hotelBenchStat"></div>
                                </div>
                                <div class="layui-row" style="height: 50%;">
                                    <div style="height: 100%" id="homeIncomeRate"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <hr class="layui-bg-green">
                <div class="layui-row layui-col-space15" style="height: 500px;">
                    <div class="layui-row layui-col-space15" style="height: 100%;padding-left: 40px">
                        <div class="layui-col-xs7" style="height: 100%;">
                            <div class="layui-row" style="height: 16%;">
                                <div class="layui-col-md-12 title" style="height:100%; width: 100%;">
                                    <h3>&nbsp;</h3>
                                    <span>入住分析</span>
                                </div>
                            </div>
                            <div class="layui-row" style="height: 34%;border-bottom: solid 1px #f0f0f0">
                                <div id="checkOutTimeStat" style="height: 100%;"></div>
                            </div>
                            <div class="layui-row" style="height: 50%;">
                                <div class="layui-col-xs6" style="height: 100%;">
                                    <div id="checkInHomeTypeStat" style="height: 100%;"></div>
                                </div>
                                <div class="layui-col-xs6" style="height: 100%;border-left: solid 1px #f0f0f0">
                                    <div id="nearThirtyStat" style="height: 100%;"></div>
                                </div>
                            </div>
                        </div>
                        <div class="layui-col-xs5" style="height: 100%;padding-left: 30px;border-left: solid 1px #f0f0f0">
                            <div class="layui-row" style="height: 16%;">
                                <div class="layui-col-md-12 title" style="height:100%; width: 100%;">
                                    <h3>&nbsp;</h3>
                                    <span>订单分析</span>
                                </div>
                            </div>
                            <div class="layui-row" style="height: 84%;">
                                <div class="layui-row" style="height: 50%;border-bottom: solid 1px #f0f0f0">
                                    <div style="height: 100%" id="OrderPayTypeStat"></div>
                                </div>
                                <div class="layui-row" style="height: 50%;">
                                    <div style="height: 100%" id="orderOriginStat"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </div>
<script src="${request.contextPath}/statics/lib/layui-v2.5.5/layui.js" charset="utf-8"></script>
<script src="${request.contextPath}/statics/js/echarts.min.js" charset="utf-8"></script>
<script src="${request.contextPath}/statics/js/china.js"></script>
<script>
    layui.use(['rate', 'form', 'jquery','element','layer', 'laydate'], function () {
        var $ = layui.jquery,
            form = layui.form,
            rate = layui.rate,
            laydate = layui.laydate;
        //日期
        laydate.render({
            elem: '#date'
            ,type: 'date'
        });

        rate.render({
            elem: '#start'
            ,value: 5
            ,readonly: true
        });

        /*************************酒店画像****************************/
        $(function () {
            const myChart = echarts.init(document.getElementById("hotelPortrayal"));
            var geoCoordMap = {
                '上海': [121.4648, 31.2891],
                '东莞': [113.8953, 22.901],
                '东营': [118.7073, 37.5513],
                '中山': [113.4229, 22.478],
                '临汾': [111.4783, 36.1615],
                '临沂': [118.3118, 35.2936],
                '丹东': [124.541, 40.4242],
                '丽水': [119.5642, 28.1854],
                '乌鲁木齐': [87.9236, 43.5883],
                '佛山': [112.8955, 23.1097],
                '保定': [115.0488, 39.0948],
                '兰州': [103.5901, 36.3043],
                '包头': [110.3467, 41.4899],
                '北京': [116.4551, 40.2539],
                '北海': [109.314, 21.6211],
                '南京': [118.8062, 31.9208],
                '南宁': [108.479, 23.1152],
                '南昌': [116.0046, 28.6633],
                '南通': [121.1023, 32.1625],
                '厦门': [118.1689, 24.6478],
                '台州': [121.1353, 28.6688],
                '合肥': [117.29, 32.0581],
                '呼和浩特': [111.4124, 40.4901],
                '咸阳': [108.4131, 34.8706],
                '哈尔滨': [127.9688, 45.368],
                '唐山': [118.4766, 39.6826],
                '嘉兴': [120.9155, 30.6354],
                '大同': [113.7854, 39.8035],
                '大连': [122.2229, 39.4409],
                '天津': [117.4219, 39.4189],
                '太原': [112.3352, 37.9413],
                '威海': [121.9482, 37.1393],
                '宁波': [121.5967, 29.6466],
                '宝鸡': [107.1826, 34.3433],
                '宿迁': [118.5535, 33.7775],
                '常州': [119.4543, 31.5582],
                '广州': [113.5107, 23.2196],
                '廊坊': [116.521, 39.0509],
                '延安': [109.1052, 36.4252],
                '张家口': [115.1477, 40.8527],
                '徐州': [117.5208, 34.3268],
                '德州': [116.6858, 37.2107],
                '惠州': [114.6204, 23.1647],
                '成都': [103.9526, 30.7617],
                '扬州': [119.4653, 32.8162],
                '承德': [117.5757, 41.4075],
                '拉萨': [91.1865, 30.1465],
                '无锡': [120.3442, 31.5527],
                '日照': [119.2786, 35.5023],
                '昆明': [102.9199, 25.4663],
                '杭州': [119.5313, 29.8773],
                '枣庄': [117.323, 34.8926],
                '柳州': [109.3799, 24.9774],
                '株洲': [113.5327, 27.0319],
                '武汉': [114.3896, 30.6628],
                '汕头': [117.1692, 23.3405],
                '江门': [112.6318, 22.1484],
                '沈阳': [123.1238, 42.1216],
                '沧州': [116.8286, 38.2104],
                '河源': [114.917, 23.9722],
                '泉州': [118.3228, 25.1147],
                '泰安': [117.0264, 36.0516],
                '泰州': [120.0586, 32.5525],
                '济南': [117.1582, 36.8701],
                '济宁': [116.8286, 35.3375],
                '海口': [110.3893, 19.8516],
                '淄博': [118.0371, 36.6064],
                '淮安': [118.927, 33.4039],
                '深圳': [114.5435, 22.5439],
                '清远': [112.9175, 24.3292],
                '温州': [120.498, 27.8119],
                '渭南': [109.7864, 35.0299],
                '湖州': [119.8608, 30.7782],
                '湘潭': [112.5439, 27.7075],
                '滨州': [117.8174, 37.4963],
                '潍坊': [119.0918, 36.524],
                '烟台': [120.7397, 37.5128],
                '玉溪': [101.9312, 23.8898],
                '珠海': [113.7305, 22.1155],
                '盐城': [120.2234, 33.5577],
                '盘锦': [121.9482, 41.0449],
                '石家庄': [114.4995, 38.1006],
                '福州': [119.4543, 25.9222],
                '秦皇岛': [119.2126, 40.0232],
                '绍兴': [120.564, 29.7565],
                '聊城': [115.9167, 36.4032],
                '肇庆': [112.1265, 23.5822],
                '舟山': [122.2559, 30.2234],
                '苏州': [120.6519, 31.3989],
                '莱芜': [117.6526, 36.2714],
                '菏泽': [115.6201, 35.2057],
                '营口': [122.4316, 40.4297],
                '葫芦岛': [120.1575, 40.578],
                '衡水': [115.8838, 37.7161],
                '衢州': [118.6853, 28.8666],
                '西宁': [101.4038, 36.8207],
                '西安': [109.1162, 34.2004],
                '贵阳': [106.6992, 26.7682],
                '连云港': [119.1248, 34.552],
                '邢台': [114.8071, 37.2821],
                '邯郸': [114.4775, 36.535],
                '郑州': [113.4668, 34.6234],
                '鄂尔多斯': [108.9734, 39.2487],
                '重庆': [107.7539, 30.1904],
                '金华': [120.0037, 29.1028],
                '铜川': [109.0393, 35.1947],
                '银川': [106.3586, 38.1775],
                '镇江': [119.4763, 31.9702],
                '长春': [125.8154, 44.2584],
                '长沙': [113.0823, 28.2568],
                '长治': [112.8625, 36.4746],
                '阳泉': [113.4778, 38.0951],
                '青岛': [120.4651, 36.3373],
                '韶关': [113.7964, 24.7028]
            };
            var dataT = [{
                name: '上海',
                value: 95
            },
                {
                    name: '广州',
                    value: 90
                },
                {
                    name: '大连',
                    value: 80
                },
                {
                    name: '南宁',
                    value: 70
                },
                {
                    name: '南昌',
                    value: 60
                },
                {
                    name: '拉萨',
                    value: 50
                },
                {
                    name: '长春',
                    value: 40
                },
                {
                    name: '包头',
                    value: 30
                },
                {
                    name: '重庆',
                    value: 20
                },
                {
                    name: '常州',
                    value: 10
                }
            ];

            geoCoordMap['北京市'] =[116.4551, 40.2539];



            var GZData = [];
            var tempData = ['北京市', GZData];

            dataT.map((item, index) => {
                var arr = [];
                arr.push(item)
                arr.push({
                    name: '北京市'
                })
                GZData.push(arr)
            })

            var convertData = function(data) {
                var res = [];
                for (var i = 0; i < data.length; i++) {
                    var dataItem = data[i];
                    var fromCoord = geoCoordMap[dataItem[0].name];
                    var toCoord = geoCoordMap[dataItem[1].name];
                    if (fromCoord && toCoord) {
                        res.push({
                            fromName: dataItem[0].name,
                            toName: dataItem[1].name,
                            coords: [fromCoord, toCoord],
                            value: dataItem[0].value
                        });
                    }
                }
                return res;
            };

            var color = ['#00ff78', '#ff971b', '#acff43', '#ff73b7', '#ffff46', '#27bbfe'];
            var series = [{
                type: 'map',
                map: 'china',
                //    width: '100%',
                geoIndex: 1,
                zlevel: 1,
                //    aspectScale: 0.75, //长宽比
                showLegendSymbol: false, // 存在legend时显示
                label: {
                    normal: {
                        show: false,
                    },
                    emphasis: {
                        show: false,
                        textStyle: {
                            color: '#fff'
                        }
                    }
                },
                roam: false,
                itemStyle: {
                    normal: {
                        areaColor: 'rgba(128, 128, 128, 0)',
                        borderColor: '#49a7d5', //省市边界线00fcff 516a89

                    },
                    emphasis: {
                        areaColor: 'rgba(128, 128, 128, 0)',
                    }
                },
                data: [{
                    name: '南海诸岛',
                    value: 0,
                    itemStyle: {
                        normal: {
                            opacity: 0,
                            label: {
                                show: false
                            }
                        }
                    }
                }]
            }, ];

            series.push({
                name: tempData[0],
                type: 'lines',
                zlevel: 3,
                symbol: ['none', 'circle'],
                effect: {
                    show: true,
                    period: 3, //箭头指向速度，值越小速度越快
                    trailLength: 0.01, //特效尾迹长度[0,1]值越大，尾迹越长重
                    symbolSize: 4, //图标大小
                },
                lineStyle: {
                    normal: {
                        opacity: 1,
                        curveness: 0.4, //曲线的弯曲程度
                        color: '#609fd4'
                    }
                },
                data: convertData(tempData[1])
            }, {
                name: tempData[0],
                type: 'scatter',
                coordinateSystem: 'geo',
                zlevel: 2,
                rippleEffect: {
                    brushType: 'stroke'
                },
                label: {
                    normal: {
                        show: true,
                        position: 'right',
                        formatter: '{b}',

                    }
                },
                symbolSize: function (val) {
                    return val[2]/2;
                },
                itemStyle: {
                    normal: {
                        //                fontSize: 80,
                    }
                },
                data: tempData[1].map(function(dataItem) {
                    return {
                        name: dataItem[0].name,
                        value: geoCoordMap[dataItem[0].name].concat([dataItem[0].value])
                    };
                })
            }, {
                type: 'effectScatter',
                coordinateSystem: 'geo',
                zlevel: 4,
                symbolSize: 30,
                label: {
                    normal: {
                        show: true,
                        position: 'right',
                        formatter: '{b}',

                        color: 'white'
                    }
                },
                itemStyle: {
                    normal: {
                        color: 'white'
                    }
                },
                rippleEffect: {
                    scale: 4,
                    brushType: 'stroke'
                },
                data: [{
                    name: tempData[0],
                    value: geoCoordMap[tempData[0]],
                    visualMap: false
                }],
            }, {
                type: 'scatter',
                coordinateSystem: 'geo',
                zlevel: 4,
                symbolSize: 20,
                symbol: 'pin',
                itemStyle: {
                    normal: {
                        color: 'white',
                    }
                },
                rippleEffect: {
                    //        brushType: 'stroke'
                },
                data: [{
                    name: tempData[0],
                    value: geoCoordMap[tempData[0]],
                    visualMap: false
                }],
            });

            var option = {
                tooltip: {
                    trigger: 'item',
                    formatter: function(params) {
                        if (params.seriesType == "scatter" && params.name != tempData[0]) {
                            return "<br>" + params.data.name  + " ---> " + params.seriesName + "<br />数量：" + params.data.value[2];
                        } else if (params.seriesType == "lines") {
                            return "<br>" + params.data.fromName + " ---> " + params.data.toName + "<br />数量：" + params.data.value;
                        } else {
                            return params.name;
                        }
                    }
                },
                visualMap: {
                    min: 0,
                    max: 100,
                    calculable: true,
                    color: color,
                    //            textStyle: {
                    //                color: '#fff',
                    //            },
                    show: false
                },
                geo: {
                    map: 'china',
                    zoom: 0.98,
                    zlevel: 2,
                    label: {
                        emphasis: {
                            show: false
                        },
                    },
                    roam: false, //是否允许缩放
                    itemStyle: {
                        normal: {
                            areaColor: '#214278',
                            borderColor: '#195BB9', //省市边界线00fcff 516a89

                        },
                        emphasis: {
                            color: '#112246' //悬浮背景
                        }
                    },
                },
                series: series
            };

            myChart.setOption(option);
        });

        /*************************评价占比******************************/
        getAppraiseRate ("综合", [95,5]);
        form.on('select(type)',function (params) {
            if (params.value == 0){
                getAppraiseRate("综合",[95,5]);
            }else if(params.value == 1){
                getAppraiseRate("服务",[93,7]);
            }else if(params.value == 2){
                getAppraiseRate("价格",[83,17]);
            }else if(params.value == 3){
                getAppraiseRate("卫生",[96,4]);
            }else if(params.value == 4){
                getAppraiseRate("位置",[89,11]);
            }else if(params.value == 5){
                getAppraiseRate("餐饮",[93,7]);
            }else if(params.value == 6){
                getAppraiseRate("设施",[97,3]);
            }
        });
        /*$("#bt1").click(function () {
            var data = [95,5];
            getAppraiseRate("综合",data);
        });
        $("#bt2").click(function () {
            var data = [93,7];
            getAppraiseRate("服务",data);
        });
        $("#bt3").click(function () {
            var data = [83,17];
            getAppraiseRate("价格",data);
        });
        $("#bt4").click(function () {
            var data = [96,4];
            getAppraiseRate("卫生",data);
        });*/

        function getAppraiseRate (name, data) {
            var myChart = echarts.init(document.getElementById('appraiseRate'));

            let Green = {
                x: 0,
                y: 0,
                x2: 0,
                y2: 1,
                colorStops: [{
                    offset: 0,
                    color: '#99da69' // 0% 处的颜色
                }, {
                    offset: 1,
                    color: '#01babc' // 100% 处的颜色
                }],
                globalCoord: false // 缺省为 false
            };
            var dataValArray = data[0]/100;
            var datatext = data;
            var datasubtext = ['好评率','差评率'];
            var option = {
                backgroundColor: '#fff',
                title: {
                    text: datatext[0]+'%',
                    subtext: name + datasubtext[0],
                    x: 'center',
                    y: 'center',
                    textStyle: {
                        fontSize:25,
                        fontWeight:'normal',
                        color: ['#67828c']
                    },
                    subtextStyle: {
                        color: '#67828c',
                        fontSize: 14,
                        align: 'center',
                    }
                },
                series: [{
                    //渐变圆环
                    name: "",
                    type: "pie",
                    radius: ["45%", "60%"],
                    startAngle: 180,
                    hoverAnimation: false,
                    avoidLabelOverlap: true,
                    z: 0,
                    zlevel: 0,
                    label: {
                        show: false,
                        normal: {show: false}
                    },
                    data: [{
                        value: 0,
                        name: "",
                        itemStyle: {
                            normal: {
                                color: Green
                            }
                        }
                    }]
                },
                    {
                        //仪表盘样式
                        name: "",
                        type: "gauge",
                        radius: "50%",
                        startAngle: 180,
                        clockwise:true,
                        splitNumber: 50,
                        hoverAnimation: true,
                        axisTick: {
                            show: false
                        },
                        splitLine: {
                            length: 20,
                            lineStyle: {
                                width: 1,
                                color: "#fff"
                            }
                        },
                        axisLabel: {
                            show: false
                        },
                        pointer: {
                            show: false
                        },
                        axisLine: {
                            lineStyle: {
                                opacity: 0
                            }
                        },
                        detail: {
                            show: false
                        },
                        data: [{
                            value: Math.round((dataValArray*100)),
                            name: ""
                        }]
                    },
                    {
                        //进度圆环
                        name: 'Line 1',
                        type: 'pie',
                        startAngle: 180,
                        clockWise: true,
                        radius:['65%','66%'],
                        itemStyle: {
                            normal: {
                                label: {
                                    show: true
                                },
                                labelLine: {
                                    show: false
                                },
                            }
                        },
                        hoverAnimation: false,

                        data: [{
                            value:  Math.round((dataValArray*100)) ,
                            itemStyle: {
                                normal: {
                                    color: '#20da97'
                                }
                            }
                        },{//画中间的图标
                            name: "",
                            value: 0,
                            label: {
                                position:'inside',
                                width: 16,
                                height: 16,
                                borderRadius: 20,
                                padding: 11
                            }
                        }, {
                            value: 100- Math.round((dataValArray*100)) ,
                            name: 'invisible',
                            itemStyle: {
                                normal: {
                                    color: 'transparent', //未完成的圆环的颜色
                                    label: {
                                        show: false
                                    },
                                    labelLine: {
                                        show: false
                                    }
                                }
                            }
                        }
                        ]
                    }
                ]
            };

            myChart.setOption(option);
        }

        /**************************客房营收分析***************************/
        $(function () {
            var myChart = echarts.init(document.getElementById('revenueHomeStat'));
            const colorList = ["#9E87FF", '#73DDFF', '#fe9a8b', '#F56948', '#9E87FF']
            var option = {
                backgroundColor: '#fff',
                title: {
                    textStyle: {
                        fontSize:12,
                        fontWeight: 400
                    },
                    left:'center',
                    top: '5%'
                },
                legend: {
                    icon: 'circle',
                    top: '5%',
                    right: '5%',
                    itemWidth: 6,
                    itemGap: 20,
                    textStyle: {
                        color: '#556677'
                    }
                },
                tooltip: {
                    trigger: 'axis',
                    axisPointer: {
                        label: {
                            show: true,
                            backgroundColor: '#fff',
                            color: '#556677',
                            borderColor: 'rgba(0,0,0,0)',
                            shadowColor: 'rgba(0,0,0,0)',
                            shadowOffsetY: 0
                        },
                        lineStyle: {
                            width: 0
                        }
                    },
                    backgroundColor: '#fff',
                    textStyle: {
                        color: '#5c6c7c'
                    },
                    padding: [10, 10],
                    extraCssText: 'box-shadow: 1px 0 2px 0 rgba(163,163,163,0.5)'
                },
                grid: {
                    top: '15%'
                },
                xAxis: [{
                    type: 'category',
                    data: ['一月', '二月', '三月', '四月', '五月', '六月'],
                    axisLine: {
                        lineStyle: {
                            color: '#DCE2E8'
                        }
                    },
                    axisTick: {
                        show: false
                    },
                    axisLabel: {
                        interval: 0,
                        textStyle: {
                            color: '#556677'
                        },
                        margin: 15
                    },
                    axisPointer: {
                        label: {
                            padding: [11, 5, 7],
                            backgroundColor: {
                                type: 'linear',
                                x: 0,
                                y: 0,
                                colorStops: [{
                                    offset: 0,
                                    color: '#fff' // 0% 处的颜色
                                }, {
                                    offset: 0.9,
                                    color: '#fff' // 0% 处的颜色
                                }, {
                                    offset: 0.9,
                                    color: '#33c0cd' // 0% 处的颜色
                                }, {
                                    offset: 1,
                                    color: '#33c0cd' // 100% 处的颜色
                                }],
                                global: false // 缺省为 false
                            }
                        }
                    },
                    boundaryGap: false
                }],
                yAxis: [{
                    type: 'value',
                    axisTick: {
                        show: false
                    },
                    axisLine: {
                        show: true,
                        lineStyle: {
                            color: '#DCE2E8'
                        }
                    },
                    axisLabel: {
                        textStyle: {
                            color: '#556677'
                        }
                    },
                    splitLine: {
                        show: false
                    }
                }],
                series: [{
                    name: 'OCC',
                    type: 'line',
                    data: [81, 66, 53, 62, 55, 23, 87],
                    symbolSize: 1,
                    symbol: 'circle',
                    smooth: true,
                    showSymbol: false,
                    lineStyle: {
                        width: 3,
                        color: new echarts.graphic.LinearGradient(0, 1, 0, 0, [{
                            offset: 0,
                            color: '#9effff'
                        },
                            {
                                offset: 1,
                                color: '#9E87FF'
                            }
                        ]),
                        shadowColor: 'rgba(158,135,255, 0.3)',
                        shadowBlur: 10,
                        shadowOffsetY: 20
                    },
                    itemStyle: {
                        normal: {
                            color: colorList[0],
                            borderColor: colorList[0]
                        }
                    }
                }, {
                    name: 'RevPAR',
                    type: 'line',
                    data: [400, 322, 421, 644, 825, 416, 510],
                    symbolSize: 1,
                    symbol: 'circle',
                    smooth: true,
                    showSymbol: false,
                    lineStyle: {
                        width: 3,
                        color: new echarts.graphic.LinearGradient(1, 1, 0, 0, [{
                            offset: 0,
                            color: '#73DD39'
                        },
                            {
                                offset: 1,
                                color: '#73DDFF'
                            }
                        ]),
                        shadowColor: 'rgba(115,221,255, 0.3)',
                        shadowBlur: 10,
                        shadowOffsetY: 20
                    },
                    itemStyle: {
                        normal: {
                            color: colorList[1],
                            borderColor: colorList[1]
                        }
                    }
                },
                    {
                        name: 'ADR',
                        type: 'line',
                        data: [150, 120, 170, 140, 500, 160, 110],
                        symbolSize: 1,
                        symbol: 'circle',
                        smooth: true,
                        showSymbol: false,
                        lineStyle: {
                            width: 3,
                            color: new echarts.graphic.LinearGradient(0, 0, 1, 0, [{
                                offset: 0,
                                color: '#fe9a'
                            },
                                {
                                    offset: 1,
                                    color: '#fe9a8b'
                                }
                            ]),
                            shadowColor: 'rgba(254,154,139, 0.3)',
                            shadowBlur: 10,
                            shadowOffsetY: 20
                        },
                        itemStyle: {
                            normal: {
                                color: colorList[2],
                                borderColor: colorList[2]
                            }
                        }
                    }
                ]
            };
            myChart.setOption(option);
        })
        /**************************月度指标图表***************************/
        $(function () {
            var myChart = echarts.init(document.getElementById('hotelBenchStat'));
            const colorList = ["#9E87FF", '#73DDFF', '#fe9a8b', '#F56948', '#9E87FF']
            var option = {
                backgroundColor: '#fff',
                title: {
                    text: '月度指标图表',
                    textStyle: {
                        fontSize:14,
                        fontWeight: 400
                    },
                },
                legend: {
                    icon: 'circle',
                    top: '5%',
                    right: '5%',
                    itemWidth: 6,
                    itemGap: 20,
                    textStyle: {
                        color: '#556677'
                    }
                },
                tooltip: {
                    trigger: 'axis',
                    axisPointer: {
                        label: {
                            show: true,
                            backgroundColor: '#fff',
                            color: '#556677',
                            borderColor: 'rgba(0,0,0,0)',
                            shadowColor: 'rgba(0,0,0,0)',
                            shadowOffsetY: 0
                        },
                        lineStyle: {
                            width: 0
                        }
                    },
                    backgroundColor: '#fff',
                    textStyle: {
                        color: '#5c6c7c'
                    },
                    padding: [10, 10],
                    extraCssText: 'box-shadow: 1px 0 2px 0 rgba(163,163,163,0.5)'
                },
                grid: {
                    top: '15%'
                },
                xAxis: [{
                    type: 'category',
                    data: ['一月', '二月', '三月', '四月', '五月', '六月'],
                    axisLine: {
                        lineStyle: {
                            color: '#DCE2E8'
                        }
                    },
                    axisTick: {
                        show: false
                    },
                    axisLabel: {
                        interval: 0,
                        textStyle: {
                            color: '#556677'
                        },
                        margin: 15
                    },
                    axisPointer: {
                        label: {
                            padding: [11, 5, 7],
                            backgroundColor: {
                                type: 'linear',
                                x: 0,
                                y: 0,
                                colorStops: [{
                                    offset: 0,
                                    color: '#fff' // 0% 处的颜色
                                }, {
                                    offset: 0.9,
                                    color: '#fff' // 0% 处的颜色
                                }, {
                                    offset: 0.9,
                                    color: '#33c0cd' // 0% 处的颜色
                                }, {
                                    offset: 1,
                                    color: '#33c0cd' // 100% 处的颜色
                                }],
                                global: false // 缺省为 false
                            }
                        }
                    },
                    boundaryGap: false
                }],
                yAxis: [{
                    type: 'value',
                    axisTick: {
                        show: false
                    },
                    min: 80,
                    max: 120,
                    axisLine: {
                        show: true,
                        lineStyle: {
                            color: '#DCE2E8'
                        }
                    },
                    axisLabel: {
                        textStyle: {
                            color: '#556677'
                        }
                    },
                    splitLine: {
                        show: false
                    }
                }],
                series: [{
                    name: 'MPI',
                    type: 'line',
                    data: [81, 96, 93, 92,105, 93, 87],
                    symbolSize: 1,
                    symbol: 'circle',
                    smooth: true,
                    showSymbol: false,
                    lineStyle: {
                        width: 3,
                        color: new echarts.graphic.LinearGradient(0, 1, 0, 0, [{
                            offset: 0,
                            color: '#9effff'
                        },
                            {
                                offset: 1,
                                color: '#9E87FF'
                            }
                        ]),
                        shadowColor: 'rgba(158,135,255, 0.3)',
                        shadowBlur: 10,
                        shadowOffsetY: 20
                    },
                    itemStyle: {
                        normal: {
                            color: colorList[0],
                            borderColor: colorList[0]
                        }
                    }
                }, {
                    name: 'ARI',
                    type: 'line',
                    data: [100, 82, 101, 84, 102, 86, 110],
                    symbolSize: 1,
                    symbol: 'circle',
                    smooth: true,
                    showSymbol: false,
                    markLine: {
                        lineStyle: {
                            color:'red'
                        },
                        data: [
                            {
                                name: '100%',
                                yAxis: 100
                            }
                        ]
                    },
                    lineStyle: {
                        width: 3,
                        color: new echarts.graphic.LinearGradient(1, 1, 0, 0, [{
                            offset: 0,
                            color: '#73DD39'
                        },
                            {
                                offset: 1,
                                color: '#73DDFF'
                            }
                        ]),
                        shadowColor: 'rgba(115,221,255, 0.3)',
                        shadowBlur: 10,
                        shadowOffsetY: 20
                    },
                    itemStyle: {
                        normal: {
                            color: colorList[1],
                            borderColor: colorList[1]
                        }
                    }
                },
                    {
                        name: 'RGI',
                        type: 'line',
                        data: [80, 120, 110, 103, 101, 110, 102],
                        symbolSize: 1,
                        symbol: 'circle',
                        smooth: true,
                        showSymbol: false,
                        lineStyle: {
                            width: 3,
                            color: new echarts.graphic.LinearGradient(0, 0, 1, 0, [{
                                offset: 0,
                                color: '#fe9a'
                            },
                                {
                                    offset: 1,
                                    color: '#fe9a8b'
                                }
                            ]),
                            shadowColor: 'rgba(254,154,139, 0.3)',
                            shadowBlur: 10,
                            shadowOffsetY: 20
                        },
                        itemStyle: {
                            normal: {
                                color: colorList[2],
                                borderColor: colorList[2]
                            }
                        }
                    }
                ]
            };
            myChart.setOption(option);
        })
        /**************************可售房百分比变化***************************/
        $(function () {
            var myChart = echarts.init(document.getElementById('homeIncomeRate'));
            var data = [{
                name: "截止目前",
                value: 75.17
            },
                {
                    name: "近3月",
                    value: 68.35
                },
                {
                    name: "近12月",
                    value: 65.36
                }
            ];
            var xAxisData = [];
            var seriesData1 = [];
            var barTopColor = ["#02c3f1", "#53e568", "#a154e9"];
            var barBottomColor = ["rgba(2,195,241,0.1)", "rgba(83, 229, 104, 0.1)", "rgba(161, 84, 233, 0.1)"];
            data.forEach(item => {
                xAxisData.push(item.name);
                seriesData1.push(item.value);
            });
            var option = {
                title: {
                    text: '每间可售房收入百分比变化图',
                    textStyle: {
                        fontSize:14,
                        fontWeight: 400
                    },
                },
                grid:{
                    top:'20%',
                    bottom:'23%'
                },
                xAxis: {
                    data: xAxisData,
                    axisTick: {
                        show: false
                    },
                    axisLine: {
                        show: false
                    },
                    axisLabel: {
                        show: true,
                        margin: 25,
                        align: 'center',
                        textStyle: {
                            fontSize: 12,
                            color: '#556677',
                        }
                    },
                    interval: 0
                },
                yAxis: {
                    splitLine: {
                        show: false
                    },
                    axisTick: {
                        show: false
                    },
                    axisLine: {
                        show: false
                    },
                    axisLabel: {
                        show: false
                    }
                },
                series: [{
                    name: '柱顶部',
                    type: 'pictorialBar',
                    symbolSize: [26, 10],
                    symbolOffset: [0, -5],
                    z: 12,
                    itemStyle: {
                        normal: {
                            color: function(params) {
                                return barTopColor[params.dataIndex];
                            }
                        }
                    },
                    label: {
                        show: true,
                        position: 'top',
                        fontSize: 16,
                        formatter: function(params) {
                            return params.value + '%';
                        },
                    },
                    symbolPosition: 'end',
                    data: seriesData1,
                }, {
                    name: '柱底部',
                    type: 'pictorialBar',
                    symbolSize: [26, 10],
                    symbolOffset: [0, 5],
                    z: 12,
                    itemStyle: {
                        normal: {
                            color: function(params) {
                                return barTopColor[params.dataIndex];
                            }
                        }
                    },
                    data: seriesData1
                }, {
                    name: '第一圈',
                    type: 'pictorialBar',
                    symbolSize: [47, 16],
                    symbolOffset: [0, 11],
                    z: 11,
                    itemStyle: {
                        normal: {
                            color: 'transparent',
                            borderColor: '#3ACDC5',
                            borderWidth: 2
                        }
                    },
                    data: seriesData1
                }, {
                    name: '第二圈',
                    type: 'pictorialBar',
                    symbolSize: [62, 22],
                    symbolOffset: [0, 17],
                    z: 10,
                    itemStyle: {
                        normal: {
                            color: 'transparent',
                            borderColor: barTopColor[0],
                            borderWidth: 2
                        }
                    },
                    data: seriesData1
                }, {
                    type: 'bar',
                    itemStyle: {
                        normal: {
                            color: function(params) {
                                return new echarts.graphic.LinearGradient(
                                    0, 0, 0, 1,
                                    [{
                                        offset: 1,
                                        color: barTopColor[params.dataIndex]
                                    },
                                        {
                                            offset: 0,
                                            color: barBottomColor[params.dataIndex]
                                        }
                                    ]
                                );
                            },
                            opacity: 0.8
                        }
                    },
                    z: 16,
                    silent: true,
                    barWidth: 26,
                    barGap: '-100%', // Make series be overlap
                    data: seriesData1
                }]
            };
            myChart.setOption(option);
        })
        /**************************入住退房时间分布***************************/
        $(function () {
            var myChart = echarts.init(document.getElementById('checkOutTimeStat'));
            const colorList = ["#9E87FF", '#73DDFF', '#fe9a8b', '#F56948', '#9E87FF']
            var option = {
                title: {
                    text: '入住退房时间分布',
                    textStyle: {
                        fontSize:14,
                        fontWeight: 400
                    },
                    left:'left',
                },
                legend: {
                    icon: 'circle',
                    top: '5%',
                    right: '5%',
                    itemWidth: 6,
                    itemGap: 20,
                    textStyle: {
                        color: '#556677'
                    }
                },
                tooltip: {
                    trigger: 'axis',
                    axisPointer: {
                        label: {
                            show: true,
                            backgroundColor: '#fff',
                            color: '#556677',
                            borderColor: 'rgba(0,0,0,0)',
                            shadowColor: 'rgba(0,0,0,0)',
                            shadowOffsetY: 0
                        },
                        lineStyle: {
                            width: 0
                        }
                    },
                    backgroundColor: '#fff',
                    textStyle: {
                        color: '#5c6c7c'
                    },
                    padding: [10, 10],
                    extraCssText: 'box-shadow: 1px 0 2px 0 rgba(163,163,163,0.5)'
                },
                grid: {
                    top: '15%',
                    left: '5%',
                },
                xAxis: [{
                    type: 'category',
                    data: ['1:00', '2:00', '3:00', '4:00', '5:00', '6:00', '7:00', '8:00', '9:00', '10:00', '11:00', '12:00'],
                    axisLine: {
                        lineStyle: {
                            color: '#DCE2E8'
                        }
                    },
                    axisTick: {
                        show: false
                    },
                    axisLabel: {
                        interval: 0,
                        textStyle: {
                            color: '#556677'
                        },
                        margin: 15
                    },
                    axisPointer: {
                        label: {
                            padding: [11, 5, 7],
                            backgroundColor: {
                                type: 'linear',
                                x: 0,
                                y: 0,
                                colorStops: [{
                                    offset: 0,
                                    color: '#fff' // 0% 处的颜色
                                }, {
                                    offset: 0.9,
                                    color: '#fff' // 0% 处的颜色
                                }, {
                                    offset: 0.9,
                                    color: '#33c0cd' // 0% 处的颜色
                                }, {
                                    offset: 1,
                                    color: '#33c0cd' // 100% 处的颜色
                                }],
                                global: false // 缺省为 false
                            }
                        }
                    },
                    boundaryGap: false
                }],
                yAxis: [{
                    type: 'value',
                    axisTick: {
                        show: false
                    },
                    axisLine: {
                        show: true,
                        lineStyle: {
                            color: '#DCE2E8'
                        }
                    },
                    axisLabel: {
                        textStyle: {
                            color: '#556677'
                        }
                    },
                    splitLine: {
                        show: false
                    }
                }],
                series: [{
                    name: '入住',
                    type: 'line',
                    data: [5, 4, 6, 8, 9, 5, 6, 8, 9, 11, 6, 4],
                    symbolSize: 1,
                    symbol: 'circle',
                    smooth: true,
                    showSymbol: false,
                    lineStyle: {
                        width: 3,
                        color: new echarts.graphic.LinearGradient(0, 1, 0, 0, [{
                            offset: 0,
                            color: '#9effff'
                        },
                            {
                                offset: 1,
                                color: '#9E87FF'
                            }
                        ]),
                        shadowColor: 'rgba(158,135,255, 0.3)',
                        shadowBlur: 10,
                        shadowOffsetY: 20
                    },
                    itemStyle: {
                        normal: {
                            color: colorList[0],
                            borderColor: colorList[0]
                        }
                    }
                }, {
                    name: '退房',
                    type: 'line',
                    data: [3, 7, 5, 2, 6, 6, 7, 9, 10, 4, 5, 4],
                    symbolSize: 1,
                    symbol: 'circle',
                    smooth: true,
                    showSymbol: false,
                    lineStyle: {
                        width: 3,
                        color: new echarts.graphic.LinearGradient(1, 1, 0, 0, [{
                            offset: 0,
                            color: '#73DD39'
                        },
                            {
                                offset: 1,
                                color: '#73DDFF'
                            }
                        ]),
                        shadowColor: 'rgba(115,221,255, 0.3)',
                        shadowBlur: 10,
                        shadowOffsetY: 20
                    },
                    itemStyle: {
                        normal: {
                            color: colorList[1],
                            borderColor: colorList[1]
                        }
                    }
                }]
            };
            myChart.setOption(option);
        })
        /**************************入住房型分布***************************/
        $(function () {
            var myChart = echarts.init(document.getElementById('checkInHomeTypeStat'));
            data = [{
                name: '1.高级单人间',
                value: 325,
            },
                {
                    name: '2.高级双人间',
                    value: 243,
                },
                {
                    name: '3.豪华大床房',
                    value: 153,
                },
                {
                    name: '4.豪华单人间',
                    value: 132,
                },
                {
                    name: '5.其他',
                    value: 25,
                }];
            getArrByKey = (data, k) => {
                let key = k || "value";
                let res = [];
                if (data) {
                    data.forEach(function (t) {
                        res.push(t[key]);
                    });
                }
                return res;
            };
            var opt = {
                index: 0
            }
            var color = ['#FC619D', '#FF904D', '#48BFE3'];
            var data = data.sort((a,b) => {
                return b.value - a.value
            });
            var option = {
                title: {
                    text: '入住房型分布',
                    textStyle: {
                        fontSize:14,
                        fontWeight: 400
                    },
                    left:'left',
                },
                grid: {
                    top: '15%',
                    left: '5%',
                    bottom: '-3%'
                },
                xAxis: {
                    show: false
                },
                yAxis: [{
                    triggerEvent: true,
                    show: true,
                    inverse: true,
                    data: getArrByKey(data, 'name'),
                    axisLine: {
                        show: false
                    },
                    splitLine: {
                        show: false
                    },
                    axisTick: {
                        show: false
                    },
                    axisLabel: {
                        show: false,
                        interval: 0,
                        color: '#666',
                        align: 'left',
                        margin: 80,
                        fontSize: 10,
                        formatter: function (value, index) {
                            if (opt.index === 0 && index < 3) {
                                return '{idx' + index + '|' + (1 + index) + '} {title|' + value + '}'
                            } else if (opt.index !== 0 && (index + opt.index) < 9) {
                                return '{idx|0' + (1 + index + opt.index) + '} {title|' + value + '}'
                            } else {
                                return '{idx|' + (1 + index + opt.index) + '} {title|' + value + '}'
                            }
                        },
                        rich: {
                            idx0: {
                                color: '#FB375E',
                                backgroundColor: '#FFE8EC',
                                borderRadius: 100,
                                padding: [5, 8]
                            },
                            idx1: {
                                color: '#FF9023',
                                backgroundColor: '#FFEACF',
                                borderRadius: 100,
                                padding: [5, 8]
                            },
                            idx2: {
                                color: '#01B599',
                                backgroundColor: '#E1F7F3',
                                borderRadius: 100,
                                padding: [5, 8]
                            },
                            idx: {
                                color: '#333',
                                borderRadius: 100,
                                padding: [5, 8]
                            },
                            title: {
                                width: 165
                            }
                        }
                    },
                }, {
                    triggerEvent: true,
                    show: true,
                    inverse: true,
                    data: getArrByKey(data, 'name'),
                    axisLine: {
                        show: false
                    },
                    splitLine: {
                        show: false
                    },
                    axisTick: {
                        show: false
                    },
                    axisLabel: {
                        interval: 0,
                        shadowOffsetX: '-20px',
                        color: ['#FF9023', 'red'],
                        align: 'right',
                        verticalAlign: 'bottom',
                        lineHeight: 30,
                        fontSize: 13,
                        formatter: function (value, index) {
                            return data[index].value + '间'
                        },
                    }
                }],
                series: [{
                    name: '条',
                    type: 'bar',
                    showBackground: true,
                    barBorderRadius: 30,
                    yAxisIndex: 0,
                    data: data,
                    barWidth: 10,
                    // align: left,
                    itemStyle: {
                        color: (val) => {
                            if (val.dataIndex < 3 && opt.index === 0) {
                                return color[val.dataIndex];
                            } else {
                                return '#1990FF'
                            }
                        },
                        barBorderRadius: 30,
                    },
                    label: {
                        normal: {
                            color: '#000',
                            show: true,
                            position: [0, '-20px'],
                            textStyle: {
                                fontSize: 16
                            },
                            formatter: function(a, b) {
                                return a.name
                            }
                        }
                    }
                }]
            };
            myChart.setOption(option);
        })
        /**************************近30天入住天数分布***************************/
        $(function () {
            var myChart = echarts.init(document.getElementById('nearThirtyStat'));
            data = [{
                name: '1天',
                value: 425,
            },
                {
                    name: '2天',
                    value: 343,
                },
                {
                    name: '3天',
                    value: 253,
                },
                {
                    name: '4天',
                    value: 102,
                },
                {
                    name: '5天及以上',
                    value: 55,
                }];
            getArrByKey = (data, k) => {
                let key = k || "value";
                let res = [];
                if (data) {
                    data.forEach(function (t) {
                        res.push(t[key]);
                    });
                }
                return res;
            };
            var opt = {
                index: 0
            }
            var color = ['#FC619D', '#FF904D', '#48BFE3'];
            var data = data.sort((a,b) => {
                return b.value - a.value
            });
            var option = {
                title: {
                    text: '近30天入住天数分布',
                    textStyle: {
                        fontSize:14,
                        fontWeight: 400
                    },
                    left:'left',
                },
                grid: {
                    top: '15%',
                    left: '5%',
                    bottom: '-3%'
                },
                xAxis: {
                    show: false
                },
                yAxis: [{
                    triggerEvent: true,
                    show: true,
                    inverse: true,
                    data: getArrByKey(data, 'name'),
                    axisLine: {
                        show: false
                    },
                    splitLine: {
                        show: false
                    },
                    axisTick: {
                        show: false
                    },
                    axisLabel: {
                        show: false,
                        interval: 0,
                        color: '#666',
                        align: 'left',
                        margin: 80,
                        fontSize: 10,
                        formatter: function (value, index) {
                            if (opt.index === 0 && index < 3) {
                                return '{idx' + index + '|' + (1 + index) + '} {title|' + value + '}'
                            } else if (opt.index !== 0 && (index + opt.index) < 9) {
                                return '{idx|0' + (1 + index + opt.index) + '} {title|' + value + '}'
                            } else {
                                return '{idx|' + (1 + index + opt.index) + '} {title|' + value + '}'
                            }
                        },
                        rich: {
                            idx0: {
                                color: '#FB375E',
                                backgroundColor: '#FFE8EC',
                                borderRadius: 100,
                                padding: [5, 8]
                            },
                            idx1: {
                                color: '#FF9023',
                                backgroundColor: '#FFEACF',
                                borderRadius: 100,
                                padding: [5, 8]
                            },
                            idx2: {
                                color: '#01B599',
                                backgroundColor: '#E1F7F3',
                                borderRadius: 100,
                                padding: [5, 8]
                            },
                            idx: {
                                color: '#333',
                                borderRadius: 100,
                                padding: [5, 8]
                            },
                            title: {
                                width: 165
                            }
                        }
                    },
                }, {
                    triggerEvent: true,
                    show: true,
                    inverse: true,
                    data: getArrByKey(data, 'name'),
                    axisLine: {
                        show: false
                    },
                    splitLine: {
                        show: false
                    },
                    axisTick: {
                        show: false
                    },
                    axisLabel: {
                        interval: 0,
                        shadowOffsetX: '-20px',
                        color: ['#FF9023', 'red'],
                        align: 'right',
                        verticalAlign: 'bottom',
                        lineHeight: 30,
                        fontSize: 13,
                        formatter: function (value, index) {
                            return data[index].value + '间'
                        },
                    }
                }],
                series: [{
                    name: '条',
                    type: 'bar',
                    showBackground: true,
                    barBorderRadius: 30,
                    yAxisIndex: 0,
                    data: data,
                    barWidth: 10,
                    // align: left,
                    itemStyle: {
                        color: (val) => {
                            if (val.dataIndex < 3 && opt.index === 0) {
                                return color[val.dataIndex];
                            } else {
                                return '#1990FF'
                            }
                        },
                        barBorderRadius: 30,
                    },
                    label: {
                        normal: {
                            color: '#000',
                            show: true,
                            position: [0, '-20px'],
                            textStyle: {
                                fontSize: 16
                            },
                            formatter: function(a, b) {
                                return a.name
                            }
                        }
                    }
                }]
            };
            myChart.setOption(option);
        })
        /**************************订单渠道来源***************************/
        $(function () {
            var myChart = echarts.init(document.getElementById('orderOriginStat'));
            var option = {
                title: {
                    text: '订单渠道来源',
                    textStyle: {
                        fontSize:14,
                        fontWeight: 400
                    },
                    left:'left',
                },
                color: ["#37A2DA"],
                radar: {
                    shape: 'circle',
                    name: {
                        textStyle: {
                            color: '#999999',
                        }
                    },
                    splitArea: {
                        areaStyle: {
                            color: ['#fff', '#fff', '#fff', '#fff'],
                            shadowColor: '#37A2DA'
                        }
                    },
                    indicator: [{
                        name: '渠道一',
                        max: 30
                    },
                        {
                            name: '渠道二',
                            max: 30
                        },
                        {
                            name: '渠道三',
                            max: 30
                        },
                        {
                            name: '渠道四',
                            max: 30
                        },
                        {
                            name: '渠道五',
                            max: 30
                        }
                    ]
                },
                series: [{
                    type: 'radar',
                    data: [{
                        value: [20, 30, 25, 30, 27, 26],
                        name: '数据',
                        itemStyle: {
                            normal: {
                                color: 'rgba(5, 128, 242, 0.8)'
                            }
                        },
                        areaStyle: {
                            normal: {
                                color: '#37A2DA'
                            }
                        }
                    }]
                }]
            }
            myChart.setOption(option);
        })
        /**************************支付方式分布***************************/
        $(function () {
            var myChart = echarts.init(document.getElementById('OrderPayTypeStat'));
            let dashedPic = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAM8AAAAOBAMAAAB6G1V9AAAAD1BMVEX////Kysrk5OTj4+TJycoJ0iFPAAAAG0lEQVQ4y2MYBaNgGAMTQQVFOiABhlEwCugOAMqzCykGOeENAAAAAElFTkSuQmCC';
            let color = ['#FF8700', '#ffc300', '#00e473', '#009DFF', '#D06EFF'];
            let chartData = [{
                name: "微信",
                value: 23,
                unit: '元'
            },
                {
                    name: "支付宝",
                    value: 21,
                    unit: '元'
                },
                {
                    name: "现金",
                    value: 20,
                    unit: '元'
                },
                {
                    name: "银行卡",
                    value: 19,
                    unit: '元'
                },
                {
                    name: "其他",
                    value: 17,
                    unit: '元'
                }


            ];
            let arrName = [];
            let arrValue = [];
            let sum = 0;
            let pieSeries = [],
                lineYAxis = [];

// 数据处理
            chartData.forEach((v, i) => {
                arrName.push(v.name);
                arrValue.push(v.value);
                sum = sum + v.value;
            })

// 图表option整理
            chartData.forEach((v, i) => {
                pieSeries.push({
                    name: '支付方式',
                    type: 'pie',
                    clockWise: false,
                    hoverAnimation: false,
                    radius: [85 - i * 15 + '%', 77 - i * 15 + '%'],
                    center: ["50%", "50%"],
                    label: {
                        show: false
                    },
                    data: [{
                        value: v.value,
                        name: v.name
                    }, {
                        value: sum - v.value,
                        name: '',
                        itemStyle: {
                            color: "rgba(0,0,0,0)"
                        }
                    }]
                });
                pieSeries.push({
                    name: '',
                    type: 'pie',
                    silent: true,
                    z: 1,
                    clockWise: false, //顺时加载
                    hoverAnimation: false, //鼠标移入变大
                    radius: [85 - i * 15 + '%',77 - i * 15 + '%'],
                    center: ["50%", "50%"],
                    label: {
                        show: false
                    },
                    data: [{
                        value: 7.5,
                        itemStyle: {
                            color: "#E3F0FF"
                        }
                    }, {
                        value: 2.5,
                        name: '',
                        itemStyle: {
                            color: "rgba(0,0,0,0)"
                        }
                    }]
                });
                v.percent = (v.value / sum * 100).toFixed(1) + "%";
                lineYAxis.push({
                    value: i,
                    textStyle: {
                        rich: {
                            circle: {
                                color: color[i],
                                padding: [0, 5]
                            }
                        }
                    }
                });
            })

            var option = {
                backgroundColor: '#fff',
                color: color,
                grid: {
                    top: '4%',
                    bottom: '56%',
                    left: "49%",
                    containLabel: false
                },
                yAxis: [{
                    type: 'category',
                    inverse: true,
                    axisLine: {
                        show: false
                    },
                    axisTick: {
                        show: false
                    },
                    axisLabel: {
                        formatter: function(params) {
                            let item = chartData[params];
                            return '{line|}{circle|●}{name|'+ item.name +'}{bd||}{percent|'+item.percent+'}'
                        },
                        interval: 0,
                        inside: true,
                        textStyle: {
                            color: "#333",
                            fontSize: 14,
                            rich: {
                                line: {
                                    width: 20,
                                    height: 10,
                                    backgroundColor: {image: dashedPic}
                                },
                                name: {
                                    color: '#666',
                                    fontSize: 14,
                                },
                                bd: {
                                    color: '#ccc',
                                    padding: [0, 5],
                                    fontSize: 14,
                                },
                                percent:{
                                    color: '#333',
                                    fontSize: 14,
                                }
                            }
                        },
                        show: true
                    },
                    data: lineYAxis
                }],
                xAxis: [{
                    show: false
                }],
                series: pieSeries
            };
            myChart.setOption(option);
        })
    });

</script>
</body>
</html>